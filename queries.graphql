query Issue($user: String!, $repo: String!, $number: Int!) {
  repository(owner: $user, name: $repo) {
    issue(number:$number) {
      id,
      title,
      author {
        ... actor,
      },
      body,
      createdAt,
    },
  },
}

query PullRequest($user: String!, $repo: String!, $number: Int!) {
  repository(owner: $user, name: $repo) {
    pullRequest(number: $number) {
      id,
      url,
      title,
      author {
        ... actor,
      },
      body,
      createdAt,
    },
  },
}

query Comments($id: ID!, $numComments: Int!, $cursor: String) {
  node(id: $id) {
    ... on Issue {
      comments(first: $numComments, after: $cursor) {
        ... comments,
      },
    },
    ... on PullRequest {
      comments(first: $numComments, after: $cursor) {
        ... comments,
      },
    },
  },
}

fragment comments on IssueCommentConnection {
  nodes {
    databaseId,
    author {
      ... actor,
    },
    body,
    createdAt,
  },
  pageInfo {
    endCursor,
  },
}

fragment actor on Actor {
  ... on User {
    login,
    name,
    email,
  },
  ... on Organization {
    login,
    name,
    emailOrNull: email,
  },
  ... on Bot {
    login,
  },
  ... on Mannequin {
    login,
    emailOrNull: email,
  },
  ... on EnterpriseUserAccount {
    login,
    name,
  },
}
